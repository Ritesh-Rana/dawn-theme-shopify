<script>
{% assign proqty = 0 %}
  {% for item in cart.items %}
    {% if item.variant.id == 44979149275425 %}
        {% assign proqty = item.quantity %}
        {% break %}
    {% endif %}
  {% endfor %}
  {% assign free_gift_over_price_30 = 100 %}
  {% assign variant_id = '44979149275425' %}
  $('input[type=number]').change(function() {
    var updateproductline = $(this).attr("data-quantity-variant-id"),
      updateproductqty = $(this).val();
      console.log("updateproductline : "+updateproductline);
      console.log("updateproductqty : "+updateproductqty);
    fetch('/cart/update.js', {
      method: "POST",
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(
        { updates : { [updateproductline] : updateproductqty } }
      )
    }).then(()=>{
    var carttotal = "{{ cart.total_price | money_without_currency }}";
        var carttotalint= carttotal.replace(',','');
            carttotalint= Number(carttotalint),
            proqty = {{ proqty }};
      console.log("carttotalint : "+carttotalint);
      console.log("proqty : "+proqty);
        if ( carttotalint >= 100 && proqty == 0) {
            fetch('/cart/change.js', {
                method: "POST",
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                      "id":44979149275425,
                      "quantity": 1
                })
            })
        } 
        else if( carttotalint < 100 || proqty > 1 ) {
          fetch('/cart/update.js', {
              method: "POST",
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                  updates: {
                    44979149275425: 0
                  }
              })
          })
        }
    })
  })     
</script>